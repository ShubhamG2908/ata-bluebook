@model JobFormPageModel

@{
	var stepperButtonModel = new StepperButtonModel
			{
				PreviousLabel = "Cancel",
				NextLabel = "Submit",
				PreviousBtnClickHandler = "handleJobEditCancel",
				NextBtnClickHandler = "handleJobEdit",
			};

	List<BreadCrumbModel> breadCrumbModel = new() {
		new BreadCrumbModel("Jobs", "Jobs", "Index"),
		new BreadCrumbModel("Edit Job").SetActive(),
					};

	TabsConfig tabsConfig = new TabsConfig()
			{
				ControlId = "jobTabs",
				JSDataSourceName = "jobEditTabs",
				JSSelectedItem = "jobEditTabs[0]",
				InitializeCallBack = "onJobTabsInitialized",
				SelectionChangedCallBack = "jobEditSelectionChanged"
			};

	MultiViewConfig multiViewConfig = new MultiViewConfig()
			{
				ControlId = "jobMultiview",
				JSDataSourceName = "jobEditTabs",
				JSSelectedItem = "jobEditTabs[0]",
				InitializeCallBack = "onJobMultiviewInitialized",
				SelectionChangedCallBack = "jobEditSelectionChanged",
				ItemTemplate = "job-multiview-template"
			};
}

<div class="container">
	<div class="mt-3 px-2">
		@(await Html.PartialAsync("_BreadCrumb", breadCrumbModel))
	</div>
	<div class="main-body-margin-bottom">
		<div class="mt-3">
			<div class="card shadow bg-body-tertiary rounded">
				<div class="card-body">
					<div class="mx-3">
						<div class="tabs-container-auto">
							@(Html.DevExtreme().AddCustomTabs(tabsConfig))
						</div>
						<div class="multiview-container">
							@(Html.DevExtreme().AddCustomMultiView(multiViewConfig))
						</div>
						<div>
							@(await Html.PartialAsync("_StepperButtons", stepperButtonModel))
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="~/js/Jobs.v1.1.js"></script>


@using (Html.DevExtreme().NamedTemplate("job-multiview-template"))
{
	<div>
		<% if(partialViewName == "_JobEventsForm") { %>
			@await Html.PartialAsync("Forms/_JobEventsForm", Model)
		<% } else if(partialViewName == "_JobFilesForm") { %>
			@await Html.PartialAsync("Forms/_JobFilesForm", Model)
		<% } else { %>
			@await Html.PartialAsync("Forms/_JobDetailsForm", Model)
		<% }%>
	</div>
}